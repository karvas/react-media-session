{"version":3,"file":"index.modern.js","sources":["../src/constant.ts","../src/use_media_session.ts","../src/media_session.tsx","../src/index.tsx"],"sourcesContent":["export const HAS_MEDIA_SESSION =\n  window && window.navigator && 'mediaSession' in window.navigator;\n\ninterface Artwork {\n  src: string;\n  sizes: string;\n  type?: string;\n}\n\nexport interface MediaSessionProps {\n  title?: string;\n  artist?: string;\n  album?: string;\n  artwork: Artwork[];\n\n  onPlay?: (...args: any[]) => any;\n  onPause?: (...args: any[]) => any;\n  onSeekBackward?: (...args: any[]) => any;\n  onSeekForward?: (...args: any[]) => any;\n  onPreviousTrack?: (...args: any[]) => any;\n  onNextTrack?: (...args: any[]) => any;\n  onStop?: (...args: any[]) => any;\n}\n","import { useEffect } from 'react';\n\nimport { MediaSessionProps } from './constant';\n\nconst useMediaSession = (props: MediaSessionProps) => {\n  const {\n    title = '',\n    artist = '',\n    album = '',\n    artwork = [],\n\n    onPlay,\n    onPause,\n    onSeekBackward,\n    onSeekForward,\n    onPreviousTrack,\n    onNextTrack,\n    onStop,\n  } = props;\n\n  // @ts-ignore\n  const { mediaSession } = navigator;\n\n  useEffect(() => {\n    // @ts-ignore\n    mediaSession.metadata = new MediaMetadata({\n      title,\n      artist,\n      album,\n      artwork,\n    });\n    return () => {\n      mediaSession.metadata = null;\n    };\n  }, [title, artist, album, artwork]);\n\n  useEffect(() => {\n    // @ts-ignore\n    mediaSession.setActionHandler('play', onPlay);\n    return () => {\n      mediaSession.setActionHandler('play', null);\n    };\n  }, [onPlay]);\n  useEffect(() => {\n    // @ts-ignore\n    mediaSession.setActionHandler('pause', onPause);\n    return () => {\n      mediaSession.setActionHandler('pause', null);\n    };\n  }, [onPause]);\n  useEffect(() => {\n    // @ts-ignore\n    mediaSession.setActionHandler('seekbackward', onSeekBackward);\n    return () => {\n      mediaSession.setActionHandler('seekbackward', null);\n    };\n  }, [onSeekBackward]);\n  useEffect(() => {\n    // @ts-ignore\n    mediaSession.setActionHandler('seekforward', onSeekForward);\n    return () => {\n      mediaSession.setActionHandler('seekforward', null);\n    };\n  }, [onSeekForward]);\n  useEffect(() => {\n    // @ts-ignore\n    mediaSession.setActionHandler('previoustrack', onPreviousTrack);\n    return () => {\n      mediaSession.setActionHandler('previoustrack', null);\n    };\n  }, [onPreviousTrack]);\n  useEffect(() => {\n    // @ts-ignore\n    mediaSession.setActionHandler('nexttrack', onNextTrack);\n    return () => {\n      mediaSession.setActionHandler('nexttrack', null);\n    };\n  }, [onNextTrack]);\n  useEffect(() => {\n    // @ts-ignore\n    mediaSession.setActionHandler('stop', onStop);\n    return () => {\n      mediaSession.setActionHandler('stop', null);\n    };\n  }, [onStop]);\n};\n\nexport default useMediaSession;\n","import React, { Fragment } from 'react';\n\nimport { MediaSessionProps } from './constant';\nimport useMediaSession from './use_media_session';\n\nconst MediaSession = (props: React.PropsWithChildren<MediaSessionProps>) => {\n  const { children, ...rest } = props;\n  useMediaSession(rest);\n  return <Fragment>{children || null}</Fragment>;\n};\n\nexport default MediaSession;\n","import React, { Fragment } from 'react';\n\nimport { HAS_MEDIA_SESSION, MediaSessionProps } from './constant';\nimport useMediaSession from './use_media_session';\n\nimport MediaSession from './media_session';\n\nconst MediaSessionWrapper = (props: React.PropsWithChildren<MediaSessionProps>) => {\n  if (!HAS_MEDIA_SESSION) {\n    return <Fragment>{props.children || null}</Fragment>;\n  }\n  return <MediaSession {...props} />;\n};\n\nexport { HAS_MEDIA_SESSION, useMediaSession };\nexport default MediaSessionWrapper;\n"],"names":["HAS_MEDIA_SESSION","window","navigator","useMediaSession","props","title","artist","album","artwork","onPlay","onPause","onSeekBackward","onSeekForward","onPreviousTrack","onNextTrack","onStop","mediaSession","useEffect","metadata","MediaMetadata","setActionHandler","MediaSession","children","rest","React","Fragment","MediaSessionWrapper"],"mappings":"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"}